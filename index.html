<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DSA Instructor Chatbot</title>
  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: linear-gradient(-45deg, #1e3c72, #2a5298, #6a11cb, #2575fc);
      background-size: 400% 400%;
      animation: gradientBG 12s ease infinite;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .chat-container {
      width: 480px;
      height: 700px;
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      border: 2px solid rgba(255,255,255,0.2);
    }

    .chat-header {
      padding: 18px;
      background: rgba(0,0,0,0.4);
      text-align: center;
      font-size: 1.5em;
      font-weight: bold;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      letter-spacing: 1px;
    }

    .chat-header span {
      margin-left: 10px;
    }

    .chat-box {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      scrollbar-width: thin;
      scrollbar-color: #6a11cb #0000;
    }

    .chat-box::-webkit-scrollbar {
      width: 6px;
    }

    .chat-box::-webkit-scrollbar-thumb {
      background: #6a11cb;
      border-radius: 10px;
    }

    .message {
      margin: 12px 0;
      padding: 12px 18px;
      border-radius: 18px;
      max-width: 75%;
      line-height: 1.5;
      font-size: 0.95em;
      word-wrap: break-word;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }

    .user {
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }

    .bot {
      background: linear-gradient(135deg, #fdfbfb, #ebedee);
      color: #333;
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }

    .typing {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      margin: 10px 0;
    }

    .dot {
      height: 8px;
      width: 8px;
      margin: 0 3px;
      background: #666;
      border-radius: 50%;
      display: inline-block;
      animation: blink 1.4s infinite both;
    }

    .dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes blink {
      0% { opacity: 0.2; }
      20% { opacity: 1; }
      100% { opacity: 0.2; }
    }

    .chat-input {
      display: flex;
      padding: 12px;
      background: rgba(0,0,0,0.35);
    }

    .chat-input input {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 12px;
      outline: none;
      font-size: 1em;
      background: rgba(255,255,255,0.8);
    }

    .chat-input button {
      margin-left: 10px;
      padding: 12px 18px;
      border: none;
      border-radius: 12px;
      background: linear-gradient(135deg, #43e97b, #38f9d7);
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .chat-input button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="chat-header">🤖 <span>DSA Instructor</span></div>
    <div class="chat-box" id="chatBox"></div>
    <div class="chat-input">
      <input type="text" id="userInput" placeholder="Ask me about DSA...">
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>

  <script>
    const API_KEY = "AIzaSyAAMkkwKqjFc8lAzeNb71lO7MkhKb5GqPU";
    const MODEL = "gemini-2.5-flash";
    const SYSTEM_INSTRUCTION = `You are a Data Structure and algorithm Instructor. 
    You will only reply to problems related to data structure and algorithms.
    You have to solve query of user in simplest way. 
    If user asks any question which is not related to data structure and algorithms, reply rudely.`;

    const chatBox = document.getElementById("chatBox");
    const userInput = document.getElementById("userInput");

    function addMessage(message, sender) {
      const div = document.createElement("div");
      div.classList.add("message", sender);
      div.innerText = message;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function showTyping() {
      const typingDiv = document.createElement("div");
      typingDiv.classList.add("typing");
      typingDiv.setAttribute("id", "typing");
      typingDiv.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
      chatBox.appendChild(typingDiv);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function removeTyping() {
      const typingDiv = document.getElementById("typing");
      if (typingDiv) typingDiv.remove();
    }

    async function sendMessage() {
      const text = userInput.value.trim();
      if (!text) return;

      addMessage(text, "user");
      userInput.value = "";

      showTyping();

      try {
        const res = await fetch(
          `https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${API_KEY}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              contents: [
                { parts: [{ text: SYSTEM_INSTRUCTION + "\nUser: " + text }] }
              ]
            })
          }
        );

        const data = await res.json();
        removeTyping();
        const botReply = data.candidates?.[0]?.content?.parts?.[0]?.text || "⚠️ No reply";
        addMessage(botReply, "bot");
      } catch (err) {
        removeTyping();
        addMessage("Error: " + err.message, "bot");
      }
    }

    // Enter key support
    userInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") sendMessage();
    });
  </script>
</body>
</html>


